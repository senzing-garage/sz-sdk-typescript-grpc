# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog], [markdownlint],
and this project adheres to [Semantic Versioning].

## [4.0.0-beta.3.0] - 2025-07-28

### Modified

- `SzGrpcConfig`
  - renamed `addDataSource` to `registerDataSource`
  - renamed `deleteDataSource` to `unregisterDataSource`
  - renamed `getDataSources` to `getDataSourceRegistry`
- `SzGrpcConfigManager`
  - renamed `getConfigs` to `getConfigRegistry`
- `SzGrpcDiagnostic`
  - renamed `checkDataStorePerformance` to `checkRepositoryPerformance`
  - renamed `getDataStoreInfo` to `getRepositoryInfo`
- `SzGrpcEngine`
  - renamed `closeExport` to `closeExportReport`
  - renamed `preprocessRecord` to `getRecordPreview`
- `SzGrpWebcConfig`
  - renamed `addDataSource` to `registerDataSource`
  - renamed `deleteDataSource` to `unregisterDataSource`
  - renamed `getDataSources` to `getDataSourceRegistry`
- `SzGrpcWebConfigManager`
  - renamed `getConfigs` to `getConfigRegistry`
- `SzGrpcWebDiagnostic`
  - renamed `checkDataStorePerformance` to `checkRepositoryPerformance`
  - renamed `getDataStoreInfo` to `getRepositoryInfo`
- `SzGrpcWebEngine`
  - renamed `closeExport` to `closeExportReport`
  - renamed `preprocessRecord` to `getRecordPreview`

## [4.0.0-beta.2.2] - 2025-06-06

### Modified

- `SzGrpcWebEngine.searchByAttributes` was not passing flags in to requests.

## [4.0.0-beta.2.1] - 2025-05-13

### Added

- New build target `make build-web` for [grpc-web](https://github.com/grpc/grpc-web) which generates the `@senzing/sz-sdk-typescript-grpc-web` package that can be used in web based projects to communicate with Senzing installations using a [Senzing gRPC server](https://github.com/senzing-garage/serve-grpc).
- `SzGrpcWebConfig` which is the same as the `SzGrpConfig` class, but uses the grpc-web client.
- `SzGrpcWebConfigManager` which is the same as the `SzGrpcWebConfigManager` class, but uses the grpc-web client.
- `SzGrpcWebDiagnostic` which is the same as the `SzGrpcWebDiagnostic` class, but uses the grpc-web client.
- `SzGrpcWebEngine` which is the same as the `SzGrpcWebEngine` class, but uses the grpc-web client.
- `SzGrpcWebProduct` which is the same as the `SzGrpcWebProduct` class, but uses the grpc-web client.
- `SzGrpcWebEnvironment` which is the same as `SzGrpcEnvironment` class, but uses the grpc-web client and concrete `SzGrpcWeb**` classes mentioned above instead of the vanilla grpc classes that `@senzing/sz-sdk-typescript-grpc` uses.
- `SzGrpcBase` now has a `waitForReady` method that returns the value of `client.waitForReady`. (this is so concrete code doesn't directly reference `this.client.waitForReady`)
- `SzGrpcWebBase` the same as `SzGrpcBase` just with a dummy `waitForReady` method that just immediately returns since the grpc-web client(s) do not have a `waitForReady` method. Also the type of it's `_metadata` property is different.

### Modified

- `SzGrpcBase`
  - now has the `_metadata` property in it instead of the concrete.
  - `client` is now an abstract.

## [4.0.0-beta.2.0] - 2025-04-28

### Removed

- `SzGrpcConfig`: config now represents a senzing config and is no longer directly accessible through an environment. Creation and initialization of `SzGrpcConfig` should now be done through methods in `SzGrpcConfigManager` and by manipulating a working instance of a `SzGrpcConfig`
  - `CloseConfig`
  - `CreateConfig` moved to `SzGrpcConfigManager#createConfig`
  - `ExportConfig` moved to `SzGrpcConfig.definition`
  - `ImportConfig` moved to `SzGrpcConfig.definition`
- `SzGrpcConfigManager`
  - `AddConfig` removed in favor of `createConfig`.
  - `getConfig` config instance no longer directly tied to config manager instance.
- `SzGrpcEnvironment`
  - `config` no longer accessible through environment instance. To work with the current config you should use `SzGrpcConfigManager#createConfig(existing ConfigId Or Definition)` pattern instead. (see examples)
  - `getConfig` (see above)

### Added

- `SzGrpcConfig`:
  - `definition` getter/setter replaces `SzGrpcConfig#importConfig` and `SzGrpcConfig#exportConfig` methods.
  - `verifyConfig` verifies whether a config definition passed to it(or the one currently assigned to the config instance when not passed in) is a valid senzing configuration
- `SzGrpcConfigManager`:
  - `createConfig` creates a new instance of `SzGrpcConfig` from a existing configId, config definition(JSON), or from the template associated with the environment.
  - `setDefaultConfig` Registers the specified config definition with an autogenerated comment(if none provided) and then sets the default configuration ID for the repository to the configuration ID that is the result of that registration, returning the config ID under which the configuration was registered.
  - `registerConfig` registers the configuration described by the specified configuration definition in the repository with the specified comment.
- `SzGrpcEngine`
  - `whySearch`

### Modified

`SzGrpcConfig`

- removed the `configId` parameter from:
  - `addDataSources`
  - `addDataSources`
  - `deleteDataSource`
  - `getDataSources`

Examples updated to reflect additions and changes

## [4.0.0-beta.1.0] - 2025-02-19

### Added to 4.0.0-beta.1

Initial beta release with support for accessing most 4.0 functions through
an instance of senzing gRPC serve.

Main modules include:

- `SzGrpcConfig` for managing senzing config and adding, removing, and listing datasources
- `SzGrpcConfigManager` for initializing, copying, cloning configs
- `SzGrpcEngine` for searching, adding records, getting entities
- `SzGrpcProduct` for getting license and version

[Keep a Changelog]: https://keepachangelog.com/en/1.0.0/
[markdownlint]: https://dlaa.me/markdownlint/
[Semantic Versioning]: https://semver.org/spec/v2.0.0.html
